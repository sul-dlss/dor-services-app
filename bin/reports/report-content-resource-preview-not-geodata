#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative '../../config/environment'
require_relative '../../lib/report'

Report.new(name: 'content-resource-type-preview-not-geodata', dsids: ['contentMetadata']).run do |ng_xml|
  # there is a resource with type=preview and there is NOT a geoData element in the contentMetadata
  ng_xml.xpath('/contentMetadata[not(resource/file/geoData)]/resource/@type="preview"')
end
