#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative '../../config/environment'
require_relative '../../lib/report'

Report.new(name: 'content-image-data-mismatch', dsid: 'contentMetadata').run do |ng_xml|
  type_not_image = '@type!="image" and @type!="page" and @type!="preview"'
  ng_xml.xpath("/contentMetadata/resource[#{type_not_image}]/file/imageData").present?
end
