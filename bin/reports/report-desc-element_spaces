#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative '../../config/environment'
require_relative '../../lib/report'

Report.new(name: 'desc-element_spaces', dsid: 'descMetadata').run do |ng_xml|
  bad_elements = ng_xml.root.xpath('//mods:*[name() != "mods:identifier" and not(*) and text() and (starts-with(text(), " "))]', mods: MODS_NS)
  return false if bad_elements.empty?

  bad_elements.map(&:to_s).join('; ')
end
